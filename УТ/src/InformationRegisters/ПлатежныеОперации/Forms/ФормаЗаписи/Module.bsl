#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;
	
	ПлатежныеОперации = ОборудованиеПлатежныеСистемы.ДанныеПлатежныхОпераций(Запись.ИдентификаторЗапроса, Неопределено, Истина);
	Если ПлатежныеОперации.Количество() > 0 Тогда
		ТекстЗапроса = ПлатежныеОперации[0].ДанныеЗапроса;
		ТекстОтвета  = ПлатежныеОперации[0].ДанныеОтвета;
	КонецЕсли;                                                                
	
	Элементы.ГруппаШапка.Видимость = ЗначениеЗаполнено(Запись.ДокументОснование); 
	ЭтаФорма.ТолькоПросмотр = Истина;                    
	
	МенеджерОборудованияВызовСервераПереопределяемый.ЭкземплярПлатежныеОперацииПриСозданииНаСервере(Запись, ЭтаФорма, Отказ, СтандартнаяОбработка);
	
	Если ОбщегоНазначенияБПО.ЭтоМобильнаяПлатформа() Тогда
		ОбщегоНазначенияБПО.ПодготовитьЭлементУправления(Элементы.СуммаОперации);
		ОбщегоНазначенияБПО.ПодготовитьЭлементУправления(Элементы.ИдентификаторОперации);
		ОбщегоНазначенияБПО.ПодготовитьЭлементУправления(Элементы.ИдентификаторЗапроса);
		ОбщегоНазначенияБПО.ПодготовитьЭлементУправления(Элементы.ИдентификаторФискальнойОперации);
		ОбщегоНазначенияБПО.ПодготовитьЭлементУправления(Элементы.ДатаЗапроса);
		ОбщегоНазначенияБПО.ПодготовитьЭлементУправления(Элементы.ВидОплатыНаТерминале);
		ОбщегоНазначенияБПО.ПодготовитьЭлементУправления(Элементы.СсылочныйНомер);
		ОбщегоНазначенияБПО.ПодготовитьЭлементУправления(Элементы.КодАвторизации);
		ОбщегоНазначенияБПО.ПодготовитьЭлементУправления(Элементы.ТипОперации);
		ОбщегоНазначенияБПО.ПодготовитьЭлементУправления(Элементы.ИдентификаторБанкаЭквайера);
		ОбщегоНазначенияБПО.ПодготовитьЭлементУправления(Элементы.ИдентификаторПлатежнойСистемы);
		ОбщегоНазначенияБПО.ПодготовитьЭлементУправления(Элементы.ИдентификаторБанковскойТранзакции);
		ОбщегоНазначенияБПО.ПодготовитьЭлементУправления(Элементы.ДатаВремяТранзакции);
		ОбщегоНазначенияБПО.ПодготовитьЭлементУправления(Элементы.ИдентификаторТерминала);
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Процедура ПриЧтенииНаСервере(ТекущийОбъект)

	// Вызов БСП
	// СтандартныеПодсистемы.УправлениеДоступом
	Если ОбщегоНазначенияБПО.ПодсистемаСуществует("СтандартныеПодсистемы.УправлениеДоступом") Тогда
		МодульУправлениеДоступом = ОбщегоНазначенияБПО.ОбщийМодуль("УправлениеДоступом");
		МодульУправлениеДоступом.ПриЧтенииНаСервере(ЭтотОбъект, ТекущийОбъект);
	КонецЕсли;
	// Конец СтандартныеПодсистемы.УправлениеДоступом
	// Конец Вызов БСП
	
КонецПроцедуры

&НаСервере
Процедура ПослеЗаписиНаСервере(ТекущийОбъект, ПараметрыЗаписи)
	
	// Вызов БСП
	// СтандартныеПодсистемы.УправлениеДоступом
	Если ОбщегоНазначенияБПО.ПодсистемаСуществует("СтандартныеПодсистемы.УправлениеДоступом") Тогда
		МодульУправлениеДоступом = ОбщегоНазначенияБПО.ОбщийМодуль("УправлениеДоступом");
		МодульУправлениеДоступом.ПослеЗаписиНаСервере(ЭтотОбъект, ТекущийОбъект, ПараметрыЗаписи);
	КонецЕсли;
	// Конец СтандартныеПодсистемы.УправлениеДоступом
	// Конец Вызов БСП
	
КонецПроцедуры

#КонецОбласти

