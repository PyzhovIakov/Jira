///////////////////////////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2022, ООО 1С-Софт
// Все права защищены. Эта программа и сопроводительные материалы предоставляются 
// в соответствии с условиями лицензии Attribution 4.0 International (CC BY 4.0)
// Текст лицензии доступен по ссылке:
// https://creativecommons.org/licenses/by/4.0/legalcode
///////////////////////////////////////////////////////////////////////////////////////////////////////

#Область ПрограммныйИнтерфейс

// Функция возвращает структуру текущих параметров.
//
// Параметры:
//  Форма		 - ФормаКлиентскогоПриложения, Неопределено	 - Форма.
//  Пользователь - СправочникСсылка.Пользователи, Неопределено	 - Пользователь.
// 
// Возвращаемое значение:
//   - Структура
//
Функция ТекущиеПараметры(Форма = Неопределено, Пользователь = Неопределено) Экспорт
	
	ОбщиеНастройки = Константы.CRM_НастройкиРаботыСРечью.ПолучитьБезопасно();
	
	Результат = РегистрыСведений.CRM_ПараметрыРаспознаванияРечи.ПолучитьБезопасно(Форма.ИмяФормы, Пользователь);
	
	Если ОбщиеНастройки.ЗапретитьОблачноеРаспознавание Тогда 
		Результат.ВариантИспользования = "Локально";
	КонецЕсли;
	
	Возврат Результат;
	
КонецФункции

// Функция возвращает признак доступности распознавания речи.
//
// Параметры:
//  ТекущиеПараметры - Структура	 - Текущие параметры.
// 
// Возвращаемое значение:
//   - Булево
//
Функция РаспознаваниеДоступно(ТекущиеПараметры) Экспорт
	
	Возврат (РольДоступна("CRM_БазовыеПраваРаботаСРечью") Или РольДоступна("ПолныеПрава"))
		И CRM_РаботаСРечьюБМОСервер.РаспознаваниеДоступно();
	
КонецФункции

#КонецОбласти
