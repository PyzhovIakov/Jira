#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ПрограммныйИнтерфейс

// Корректирует схему компоновки данных в карте маршрута.
//
// Параметры:
//	КартаМаршрута - СправочникСсылка.CRM_КартыМаршрутов - карта маршрута.
//
Процедура СкорретироватьСКД_В_КартеМаршрутаПроцессе(КартаМаршрута) Экспорт
	
	УстановитьПривилегированныйРежим(Истина);
	
	Объект = КартаМаршрута.ПолучитьОбъект();
	РеквизитХранилищаСхемыКомпоновкиДанных = "ХранилищеСхемыКомпоновкиДанных";
	
	Если Объект.ТипПроцесса = Перечисления.bpmТипыПроцессов.ПроцессОбъекта Тогда
		СхемаКомпоновкиДанных		=
			CRM_БизнесПроцессыПереопределяемый.ПолучитьСхемуКомпоновкиПоИмениОбъекта(Объект.ВидОбъектаСтрокой);
	ИначеЕсли Объект.ТипПроцесса = Перечисления.bpmТипыПроцессов.НезависимыйПроцесс Тогда
		СхемаКомпоновкиДанных		= CRM_БизнесПроцессыПереопределяемый.ПолучитьСхемуКомпоновкиПоИмениОбъекта("Пользователи");
	КонецЕсли;
	
	Объект[РеквизитХранилищаСхемыКомпоновкиДанных] = Новый ХранилищеЗначения(СхемаКомпоновкиДанных);
	Объект.ОбменДанными.Загрузка = Истина;
	Объект.Записать();
		
КонецПроцедуры

#КонецОбласти

#КонецЕсли
