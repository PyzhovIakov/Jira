
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	НаборСвойствЗаявка = УправлениеСвойствами.НаборСвойствПоИмени("Документ_CRM_Заявка");
	ОбщегоНазначенияКлиентСервер.УстановитьПараметрДинамическогоСписка(ДополнительныеРеквизиты,
		"НаборСвойствЗаявка", НаборСвойствЗаявка, Истина);
	
	Если Параметры.Свойство("СписокИсключений") Тогда
		
		Если Параметры.СписокИсключений.Количество() > 0 Тогда
			
			НовЭлементОтбора = ДополнительныеРеквизиты.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
			НовЭлементОтбора.ЛевоеЗначение = Новый ПолеКомпоновкиДанных("Ссылка");
			
			НовЭлементОтбора.ВидСравнения = ВидСравненияКомпоновкиДанных.НеВСписке;
			НовЭлементОтбора.Использование = Истина;
			НовЭлементОтбора.ПравоеЗначение = Параметры.СписокИсключений;
			
		КонецЕсли;
		
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ОбработкаВыбора(ВыбранноеЗначение, ИсточникВыбора)
	
	ОповеститьОВыборе(ВыбранноеЗначение);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовТаблицыФормыДополнительныеРеквизиты

&НаКлиенте
Процедура ДополнительныеРеквизитыСсылкаНажатие(Элемент, СтандартнаяОбработка)
	
	ОповеститьОВыборе(Элементы.ДополнительныеРеквизиты.ТекущиеДанные.Ссылка);
	
КонецПроцедуры

&НаКлиенте
Процедура ДополнительныеРеквизитыВыборЗначения(Элемент, Значение, СтандартнаяОбработка)
	ОповеститьОВыборе(Элементы.ДополнительныеРеквизиты.ТекущиеДанные.Ссылка);
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Создать(Команда)
	
	ОткрытьФорму("Справочник.CRM_ИсточникиПолученияЛидов.Форма.ФормаСозданияДополнительныхРеквизитов",
		 , ЭтотОбъект, , , , ,
		 РежимОткрытияОкнаФормы.БлокироватьОкноВладельца);
	
КонецПроцедуры

&НаКлиенте
Процедура Выбрать(Команда)
	
	ОповеститьОВыборе(Элементы.ДополнительныеРеквизиты.ТекущиеДанные.Ссылка);
	
КонецПроцедуры

&НаКлиенте
Процедура Отменить(Команда)
	
	Закрыть();
	
КонецПроцедуры

#КонецОбласти
